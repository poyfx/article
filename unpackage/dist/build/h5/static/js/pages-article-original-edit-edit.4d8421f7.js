(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-article-original-edit-edit"],{"029d":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.edit[data-v-5b24a104]{height:100vh}.edit .edit_content[data-v-5b24a104]{padding:26px 30px 29px 31px}.edit .edit_content .edit_content_img[data-v-5b24a104]{width:70px;height:70px;margin-right:9px;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-content:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background-color:#eee}.edit .edit_content .edit_content_img uni-view[data-v-5b24a104]{color:#ddd;font-size:46px;line-height:36px;font-weight:100}.edit .edit_content .edit_content_img uni-text[data-v-5b24a104]{color:#888;font-size:.65rem}.edit .edit_content .edit_content_img uni-image[data-v-5b24a104]{width:70px;height:70px}.edit .edit_content .edit_content_info[data-v-5b24a104]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#555}.edit .edit_content .edit_content_info uni-view[data-v-5b24a104]{padding:7px 5px}.edit .edit_content .edit_content_info .title uni-input[data-v-5b24a104]{font-size:.95rem}.edit .edit_content .edit_content_info .user uni-input[data-v-5b24a104]{font-size:.85rem;margin-left:3px}.edit .edit_article_title[data-v-5b24a104]{background-color:#f7f7f7;padding:0 0 0 28px;-webkit-align-content:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.edit .edit_article_title .edit_article_left uni-text[data-v-5b24a104]{font-size:.75rem;color:#555;font-weight:550}.edit .edit_article_title .edit_article_right[data-v-5b24a104]{padding:23px 0 20px}.edit .edit_article_title .edit_article_right .edit_article_img[data-v-5b24a104]{-webkit-align-content:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-right:20px}.edit .edit_article_title .edit_article_right .edit_article_img uni-image[data-v-5b24a104]{width:20px;height:20px;margin-right:5px}.edit .edit_article_title .edit_article_right .edit_article_img uni-text[data-v-5b24a104]{color:#888;font-size:.65rem}.edit .edit_article[data-v-5b24a104]{padding:20px 26px 20px 28px}.edit .edit_article .rich[data-v-5b24a104]{width:100%;height:100%;max-height:300px;overflow:auto;outline:none}.edit .edit_article .rich[data-v-5b24a104]:empty:before{content:attr(data-placeholder);color:#bbb}.edit .edit_article .rich[data-v-5b24a104]:focus:before{content:none}.edit .editor_view[data-v-5b24a104]{padding:20px 26px 20px 28px}.edit .edit_btn[data-v-5b24a104]{padding-bottom:20px}.edit .edit_btn uni-button[data-v-5b24a104]{width:90%;background-color:#3c84ef;font-size:.75rem;color:#fff;padding:6px 0 5px}',""])},"1df0":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("04bd")),a=n(i("a656")),r=n(i("94e0")),c=n(i("6953")),s=n(i("38dc")),d={data:function(){return{titles:"发布原创文章",src:"",detail:"",isClear:"",art_title:"",art_name:"",type:"1",art_id:"",art:{title:"",content:"",id:""}}},onLoad:function(t){var e=uni.getStorageSync("drafts");e&&(e.type,this.art_id=e.id,this.getArticleDetile(this.art_id))},methods:{getArticleDetile:function(t){var e=this;s.default.getArticle({id:t,success:function(t){if(console.log(t),200==t.statusCode&&0==t.data.code){var i=t.data.result.article;e.art_name=i.author,e.art_title=i.title,e.src=i.cover,e.detail=i.content}},fail:function(t){console.log(t)},complete:function(t){console.log(t)}})},uploadTitle:function(){var t=this;uni.chooseImage({count:1,sourceType:["album "],success:function(e){uni.showLoading({title:"图片上传中...",mask:!0}),c.default.uploadfiles({photo:e.tempFilePaths[0],success:function(e){uni.hideLoading(),console.log(e);var i=JSON.parse(e.data);if(200==e.statusCode&&0==i.code)t.src=i.path;else if(-1e4==i.code){var n=window.location.href,o=n.indexOf("#"),a=n.substring(o+1);console.log(a),uni.setStorageSync("nextURL",{path:a}),uni.removeStorage({key:"Token"}),uni.navigateTo({url:"/pages/login/login"})}},fail:function(t){uni.hideLoading(),console.log(t)},complete:function(t){uni.hideLoading()}})}})},save:function(){var t=this;if(""!=this.art_title)if(""!=this.art_name){var e=!1;e||(e=!0,s.default.release({id:this.art_id,publish_type:1,title:this.art_title,cover:this.src,author:this.art_name,content:this.detail,success:function(i){console.log(i),e=!1,200==i.statusCode&&0==i.data.code?(t.id=i.data.article_id,uni.showToast({title:"保存成功",duration:3e3})):uni.showToast({title:i.data.msg,icon:"none",position:"bottom",duration:3e3})},fail:function(t){console.log(t),e=!1},complete:function(t){e=!1}}))}else uni.showToast({title:"请输入作者名",icon:"none",duration:3e3,position:"bottom"});else uni.showToast({title:"请输入文章标题",icon:"none",duration:3e3,position:"bottom"})},change:function(t){console.log(t)},go:function(){var t=this;if(uni.removeStorage({key:"head"}),uni.removeStorage({key:"foot"}),uni.removeStorage({key:"ask"}),uni.removeStorage({key:"products"}),""!=this.art_title)if(""!=this.art_name){var e=!1;e||(e=!0,s.default.release({id:this.art_id,publish_type:1,title:this.art_title,cover:this.src,author:this.art_name,content:this.detail,success:function(i){console.log(i),e=!1,200==i.statusCode&&0==i.data.code?(t.id=i.data.article_id,t.art.content=t.detail,t.art.title=t.art_title,t.art.id=t.id,t.art.cover=t.src,t.art.name=t.art_name,uni.setStorage({key:"art",data:t.art}),t.$router.push({name:"addDisplayBit",params:{lock:"1",id:t.id}})):uni.showToast({title:i.data.msg,icon:"none",position:"bottom",duration:3e3})},fail:function(t){console.log(t),e=!1},complete:function(t){e=!1}}))}else uni.showToast({title:"请输入作者名",icon:"none",duration:3e3,position:"bottom"});else uni.showToast({title:"请输入文章标题",icon:"none",duration:3e3,position:"bottom"})},back:function(){uni.navigateBack({delta:1})}},components:{titles:o.default,parser:a.default,editors:r.default}};e.default=d},2735:function(t,e,i){"use strict";i.r(e);var n=i("30bf"),o=i("423a");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("9426");var r,c=i("f0c5"),s=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"5b24a104",null,!1,n["a"],r);e["default"]=s.exports},"2e3b":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.editor[data-v-96f00354]{width:100%;background-color:#fff;margin:0 auto;position:relative;z-index:0;box-sizing:border-box}.toolbar[data-v-96f00354]{-webkit-align-content:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;background-color:#f7f7f7;padding:16px 0 14px}.toolbar uni-text[data-v-96f00354]{position:absolute;left:27px;font-size:.75rem;color:#555;font-weight:550}.text[data-v-96f00354]{border:1px solid #ccc;width:100%;min-height:200px;height:200px}uni-textarea[data-v-96f00354]{padding:20px 26px 20px 28px;min-height:200px;height:200px;box-sizing:border-box}',""])},"30bf":function(t,e,i){"use strict";var n={"uni-icons":i("d7e6").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"edit bgcf"},[i("v-uni-view",{staticClass:"header_save"},[i("v-uni-view",{staticClass:"header_title_white_save_f7 flex"},[i("v-uni-view",{staticClass:"left_save",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[i("uni-icons",{attrs:{type:"arrowleft",size:"28"}})],1),i("v-uni-view",[t._v("创建文章")]),i("v-uni-view",{staticClass:"right_savebtn flex"},[i("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save.apply(void 0,arguments)}}},[t._v("保存")])],1)],1)],1),i("v-uni-view",{staticClass:"edit_content bgcf flex"},[i("v-uni-view",{staticClass:"edit_content_img flex",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadTitle.apply(void 0,arguments)}}},[""==t.src?i("v-uni-view",[t._v("+")]):t._e(),""==t.src?i("v-uni-text",[t._v("封面图")]):t._e(),""!==t.src?i("v-uni-image",{attrs:{src:t.src,mode:"aspectFill"}}):t._e()],1),i("v-uni-view",{staticClass:"edit_content_info"},[i("v-uni-view",{staticClass:"title border-Bottom"},[i("v-uni-input",{attrs:{type:"text",placeholder:"这里是文章标题"},model:{value:t.art_title,callback:function(e){t.art_title=e},expression:"art_title"}})],1),i("v-uni-view",{staticClass:"user"},[i("v-uni-input",{attrs:{type:"text",placeholder:"作者名"},model:{value:t.art_name,callback:function(e){t.art_name=e},expression:"art_name"}})],1)],1)],1),i("v-uni-view",{staticClass:"editor_view"},[i("editors",{attrs:{isClear:t.isClear},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}})],1),i("v-uni-view",{staticClass:"edit_btn bgcf"},[i("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.go.apply(void 0,arguments)}}},[t._v("下一步")])],1)],1)},a=[];i.d(e,"b",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"a",function(){return n})},"423a":function(t,e,i){"use strict";i.r(e);var n=i("1df0"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"4cdd":function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor"},[i("div",{ref:"toolbar",staticClass:"toolbar"},[i("v-uni-text",[t._v("文章正文")])],1),i("div",{ref:"editor",staticClass:"text"})])},a=[];i.d(e,"b",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"a",function(){return n})},"5f9e":function(t,e,i){var n=i("029d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("8469c23c",n,!0,{sourceMap:!1,shadowMode:!1})},"65fa":function(t,e,i){"use strict";var n=i("9e8c"),o=i.n(n);o.a},"72aa":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("c4c2")),a={name:"editoritem",data:function(){return{editor:null,info_:null,show:!0}},model:{prop:"value",event:"change"},props:{value:{type:String,default:""},isClear:{type:Boolean,default:!1},shows:{type:Boolean,default:!0}},watch:{isClear:function(t){t&&(this.editor.txt.clear(),this.info_=null)},value:function(t){t!==this.editor.txt.html()&&this.editor.txt.html(this.value)}},mounted:function(){this.seteditor(),this.editor.txt.html(this.value)},methods:{hide:function(){this.show=!1},seteditor:function(){var t=this,e=uni.getStorageSync("Token");this.editor=new o.default(this.$refs.toolbar,this.$refs.editor),this.editor.customConfig.uploadImgShowBase64=!1,this.editor.customConfig.uploadImgServer="http://api.asset.go-tech.cn/app/user/uploadFile",this.editor.customConfig.uploadImgHeaders={Token:e},this.editor.customConfig.uploadFileName="file",this.editor.customConfig.uploadImgMaxSize=5242880,this.editor.customConfig.uploadImgMaxLength=6,this.editor.customConfig.uploadImgTimeout=18e4,this.editor.customConfig.showLinkImg=!1,this.editor.customConfig.pasteFilterStyle=!1,this.editor.customConfig.pasteIgnoreImg=!0;var i=document.createElement("div");i.innerHTML="插入图片",i.style.color="#888888",this.editor.customConfig.menus=["image","video"],this.editor.customConfig.uploadImgHooks={fail:function(t,e,i){},success:function(t,e,i){},timeout:function(t,e){},error:function(t,e){},customInsert:function(t,e,i){console.log(e),t(e.path)}},this.editor.customConfig.onchange=function(e){t.info_=e,t.$emit("change",t.info_)},this.editor.create()}}};e.default=a},9426:function(t,e,i){"use strict";var n=i("5f9e"),o=i.n(n);o.a},"94e0":function(t,e,i){"use strict";i.r(e);var n=i("4cdd"),o=i("9ae6");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("65fa");var r,c=i("f0c5"),s=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"96f00354",null,!1,n["a"],r);e["default"]=s.exports},"9ae6":function(t,e,i){"use strict";i.r(e);var n=i("72aa"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"9e8c":function(t,e,i){var n=i("2e3b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("0a9cbb28",n,!0,{sourceMap:!1,shadowMode:!1})}}]);